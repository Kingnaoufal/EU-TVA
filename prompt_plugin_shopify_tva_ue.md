x # ğŸ§  PROMPT IA â€” GÃ©nÃ©ration dâ€™un Plugin Shopify TVA UE (OSS) + Landing Page

## âš ï¸ INSTRUCTIONS CRITIQUES (Ã€ LIRE EN PREMIER)

Tu dois **EXÃ‰CUTER STRICTEMENT** ce cahier des charges.
- âŒ Ne pas interprÃ©ter
- âŒ Ne pas simplifier
- âŒ Ne pas supprimer de fonctionnalitÃ©s
- âŒ Ne pas rÃ©pondre par de la thÃ©orie
- âœ… Produire du code fonctionnel
- âœ… DÃ©ployer en production
- âœ… Fournir toutes les URLs finales

Si une information est manquante, fais **une hypothÃ¨se explicite**, mais **nâ€™interromps jamais lâ€™exÃ©cution**.

---

## ğŸ¯ RÃ”LE DE Lâ€™IA

Tu es une **IA dÃ©veloppeur senior expert** en :
- Shopify Apps
- SaaS B2B
- TVA europÃ©enne / OSS
- Architecture cloud sÃ©curisÃ©e
- DÃ©ploiement production

Tu agis comme un **lead engineer responsable dâ€™un produit commercial rÃ©el**.

---

## ğŸ¯ OBJECTIF PRODUIT

CrÃ©er une **application Shopify (plugin)** destinÃ©e aux **microâ€‘business europÃ©ens** (France en prioritÃ©) vendant dans plusieurs pays de lâ€™UE.

### ProblÃ¨me
- TVA UE complexe
- RÃ©gime OSS mal compris
- Erreurs Shopify frÃ©quentes
- Tableurs manuels
- Stress du contrÃ´le fiscal

### Solution
Un plugin Shopify qui :
- dÃ©tecte les erreurs de TVA
- calcule la TVA UE par pays
- gÃ©nÃ¨re un **rapport OSS trimestriel prÃªt Ã  envoyer**
- conserve un historique lÃ©gal
- alerte automatiquement lâ€™utilisateur

---

## ğŸ§© POSITIONNEMENT (NON NÃ‰GOCIABLE)

- âŒ Pas enterprise
- âŒ Pas fiscalistes
- âœ… Microâ€‘business Shopify
- âœ… UX ultra simple
- âœ… Prix clair
- âœ… Objectif : tranquillitÃ© dâ€™esprit

---

## ğŸ§± STACK TECHNIQUE IMPOSÃ‰E

### Shopify
- Shopify Embedded App
- OAuth officiel
- Webhooks (orders, refunds)
- Shopify Billing API

### Backend
- JAVA
- API REST
- PostgreSQL
- Architecture modulaire

### Frontend
- React
- Shopify Polaris

### Infra
- Docker
- HTTPS obligatoire
- DÃ©ploiement cloud (AWS / GCP / Railway / Render autorisÃ©)
- Variables dâ€™environnement sÃ©curisÃ©es

---

## ğŸ”§ FONCTIONNALITÃ‰S OBLIGATOIRES

### 1. Connexion Shopify
- Installation 1 clic
- Permissions minimales
- Aucune donnÃ©e inutile

### 2. Analyse TVA UE
- Analyse ventes par pays UE
- Application des taux TVA
- Gestion rÃ©gime OSS (simplifiÃ©)

> HypothÃ¨se autorisÃ©e : pas de cas fiscaux ultra complexes.

### 3. DÃ©tection dâ€™erreurs
- ParamÃ©trage Shopify incorrect
- Taux incohÃ©rents
- Alertes claires et comprÃ©hensibles

### 4. Rapport OSS
- GÃ©nÃ©ration trimestrielle
- Formats : CSV + PDF
- Conforme OSS
- TÃ©lÃ©chargeable

### 5. Alertes automatiques
- Email :
  - seuil OSS
  - erreurs
  - Ã©chÃ©ances

### 6. Historique & audit
- Historique des rapports
- Journal minimal de conformitÃ©

### 7. Abonnement
- Plan unique :
  - 99â‚¬ / mois
  - 999â‚¬ / an
- Via Shopify Billing

### 8. SÃ©curitÃ© & RGPD
- Chiffrement
- AccÃ¨s restreint
- DonnÃ©es minimales
- RGPD basique respectÃ©

---

## ğŸ§  UX / COPY (OBLIGATOIRE)

Langage :
- non technique
- rassurant
- orientÃ© stress / tranquillitÃ©

Exemples :
- Â« Tout est prÃªt pour votre dÃ©claration OSS Â»
- Â« Aucune action requise Â»
- Â« Vous Ãªtes conforme Â»

---

## ğŸŒ LANDING PAGE (Ã€ PRODUIRE)

### Objectif
- Conversion
- AccÃ¨s anticipÃ©
- PrÃ©â€‘vente

### Contenu obligatoire

#### Hero
**Titre**
> La TVA UE sur Shopify, sans erreurs ni stress.

**Sousâ€‘titre**
> DÃ©tectez les erreurs, gÃ©nÃ©rez vos rapports OSS et dormez tranquille.

**CTA**
> Rejoindre lâ€™accÃ¨s anticipÃ©

---

#### ProblÃ¨me
- TVA compliquÃ©e
- Excel
- Peur du contrÃ´le
- Temps perdu

---

#### Solution
- Plugin Shopify
- Installation 5 minutes
- Rapports automatiques
- Alertes

---

#### Fonctionnement
1. Connexion Shopify
2. Analyse automatique
3. Rapport OSS prÃªt

---

#### Pricing
- Comparaison comptable
- 99â‚¬/mois ou 999â‚¬/an

---

#### CTA final
- AccÃ¨s anticipÃ©
- Bonus early adopters

---

### Stack landing
- HTML/CSS ou React
- SEO basique
- Formulaire email
- DÃ©ploiement public (Netlify / Vercel)

---

## ğŸš€ DÃ‰PLOIEMENT (OBLIGATOIRE)

Tu dois :
1. DÃ©ployer le backend
2. DÃ©ployer le frontend
3. DÃ©ployer lâ€™app Shopify
4. Fournir les variables dâ€™environnement
5. Fournir les instructions Shopify App Store
6. DÃ©ployer la landing page
7. Fournir toutes les URLs finales

---

## ğŸ“¦ LIVRABLES

Tu dois livrer :
1. Code complet Shopify App
2. Code backend
3. SchÃ©ma base de donnÃ©es
4. Code landing page
5. Scripts de dÃ©ploiement
6. Documentation dâ€™installation
7. Instructions App Store
8. Liste des hypothÃ¨ses prises

---

## ğŸ DÃ‰FINITION DU SUCCÃˆS

- App installable sur Shopify
- Rapport OSS gÃ©nÃ©rable
- Landing page en ligne
- Produit prÃªt Ã  Ãªtre vendu


---

## â• FEATURE OBLIGATOIRE SUPPLÃ‰MENTAIRE â€” VALIDATION TVA INTRACOMMUNAUTAIRE (VIES)

âš ï¸ **CETTE FEATURE EST OBLIGATOIRE ET DOIT ÃŠTRE IMPLÃ‰MENTÃ‰E EN CODE FONCTIONNEL.**
Lâ€™IA NE DOIT PAS Lâ€™IGNORER, NI LA SIMPLIFIER.

### Objectif
Permettre la **validation officielle des numÃ©ros de TVA intracommunautaire** des clients B2B via le **service europÃ©en officiel VIES**, afin de :
- distinguer B2B / B2C
- justifier les exonÃ©rations de TVA
- fournir une **preuve lÃ©gale horodatÃ©e** en cas de contrÃ´le fiscal
- enrichir correctement le **reporting OSS**

### Exigences techniques STRICTES

- Utiliser le **service officiel VIES** (SOAP ou API Ã©quivalente disponible)
- ImplÃ©menter une couche backend dÃ©diÃ©e `vat_validation`
- VÃ©rifier pour chaque numÃ©ro :
  - format
  - pays
  - statut (valide / invalide / indisponible)
- GÃ©rer les cas dâ€™erreur VIES (timeout, indisponibilitÃ©)
- Mettre en place un **retry contrÃ´lÃ©**
- Ne jamais bloquer le checkout Shopify

### Stockage & preuve
- Stocker en base :
  - numÃ©ro de TVA
  - pays
  - rÃ©sultat de validation
  - date et heure de validation
  - identifiant de commande Shopify associÃ©
- Ces donnÃ©es servent de **preuve lÃ©gale** et doivent Ãªtre conservÃ©es

### IntÃ©gration fonctionnelle
- La validation TVA :
  - nâ€™est PAS une simple option
  - alimente le moteur de calcul TVA
  - impacte le rapport OSS
- Elle ne remplace PAS toute la logique fiscale avancÃ©e B2B, mais doit Ãªtre suffisante pour :
  - distinguer ventes exonÃ©rÃ©es
  - justifier les lignes OSS

### UX OBLIGATOIRE
Interface claire et non technique :
- âœ… Â« NumÃ©ro de TVA valide (vÃ©rifiÃ© le JJ/MM/AAAA) Â»
- âš ï¸ Â« NumÃ©ro de TVA invalide ou non vÃ©rifiable Â»
- âŒ Â« NumÃ©ro de TVA manquant Â»

Aucun jargon fiscal avancÃ© ne doit apparaÃ®tre cÃ´tÃ© utilisateur.

---

âš ï¸ **SI CETTE FEATURE Nâ€™EST PAS IMPLÃ‰MENTÃ‰E, LE TRAVAIL EST CONSIDÃ‰RÃ‰ COMME INCOMPLE.**
